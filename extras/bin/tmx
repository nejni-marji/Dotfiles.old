#!/bin/bash
while getopts 'd' OPT; do
	case ${OPT} in
		d) OPT_DETACH=true ;;
	esac
done
export TERM=tmux-256color
if [[ $OPT_DETACH ]]; then
	export TMX_EXIT=$(if [[ -z $TMUX ]]; then tmux -q has-session 2> /dev/null && tmux attach-session -d || tmux new-session; fi)
else
	export TMX_EXIT=$(if [[ -z $TMUX ]]; then tmux -q has-session 2> /dev/null && tmux attach-session || tmux new-session; fi)
fi
if [[ ! "$TMX_EXIT" =~ detach ]]; then
	tmux -q has-session 2> /dev/null && tmx
fi
